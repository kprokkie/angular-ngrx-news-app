{"ast":null,"code":"import _classCallCheck from \"C:/Users/David/source/repos/angular-ngrx-news-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"C:/Users/David/source/repos/angular-ngrx-news-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport { ActivatedRoute } from '@angular/router';\nimport { Store, select } from '@ngrx/store';\nimport { Subject } from 'rxjs';\nimport { takeUntil } from 'rxjs/operators';\nimport { getFilterSubSection } from '../../store/selectors/news.selectors';\nimport * as fromActions from '../../store/actions';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@ngrx/store\";\nimport * as i2 from \"@angular/router\";\nimport * as i3 from \"@angular/common\";\nimport * as i4 from \"./news-item/news-item.component\";\n\nfunction NewsComponent_nyt_news_item_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"nyt-news-item\", 2);\n  }\n\n  if (rf & 2) {\n    var news_r1 = ctx.$implicit;\n    i0.ɵɵproperty(\"news\", news_r1);\n  }\n}\n\nexport var NewsComponent = /*#__PURE__*/(function () {\n  var NewsComponent = /*#__PURE__*/function () {\n    function NewsComponent(store, route) {\n      _classCallCheck(this, NewsComponent);\n\n      this.store = store;\n      this.route = route;\n      this.unsubscribe = new Subject();\n    }\n\n    _createClass(NewsComponent, [{\n      key: \"ngOnInit\",\n      value: function ngOnInit() {\n        this.initSubscriptions();\n      }\n    }, {\n      key: \"ngDestroy\",\n      value: function ngDestroy() {\n        this.unsubscribe.next();\n        this.unsubscribe.complete();\n      }\n      /**\r\n       * Holding Subscriptions\r\n       */\n\n    }, {\n      key: \"initSubscriptions\",\n      value: function initSubscriptions() {\n        var _this = this;\n\n        // 1. subscribe to route and dispatch an action to load news for selected section\n        this.route.params.pipe(takeUntil(this.unsubscribe)).subscribe(function (params) {\n          _this.store.dispatch(new fromActions.LoadNewsSection(params.section));\n        }); // 2. subscribe to store and selector to load section news and filtered section news\n\n        this.store.pipe(select(getFilterSubSection)).pipe(takeUntil(this.unsubscribe)).subscribe(function (sectionNews) {\n          _this.sectionNews = sectionNews;\n        });\n      }\n    }]);\n\n    return NewsComponent;\n  }();\n\n  NewsComponent.ɵfac = function NewsComponent_Factory(t) {\n    return new (t || NewsComponent)(i0.ɵɵdirectiveInject(i1.Store), i0.ɵɵdirectiveInject(i2.ActivatedRoute));\n  };\n\n  NewsComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: NewsComponent,\n    selectors: [[\"nyt-news\"]],\n    decls: 2,\n    vars: 1,\n    consts: [[1, \"nyt-news\"], [3, \"news\", 4, \"ngFor\", \"ngForOf\"], [3, \"news\"]],\n    template: function NewsComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"div\", 0);\n        i0.ɵɵtemplate(1, NewsComponent_nyt_news_item_1_Template, 1, 1, \"nyt-news-item\", 1);\n        i0.ɵɵelementEnd();\n      }\n\n      if (rf & 2) {\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngForOf\", ctx.sectionNews);\n      }\n    },\n    directives: [i3.NgForOf, i4.NewsItemComponent],\n    styles: [\".nyt-news[_ngcontent-%COMP%]{padding:1rem}\"]\n  });\n  return NewsComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}